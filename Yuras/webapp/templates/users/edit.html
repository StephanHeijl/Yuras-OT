{% extends "layout/master.html" %} {% block index %} {{ deferJS("/assets/js/yuras.js", 1) }} {{ deferJS("/assets/js/validator.min.js", 2) }}
<div class="container">

	<div class="row">

		<div class="col-lg-12">
			<h2>{{ _("Edit a user") }}</h2>	
		</div>

		<div class="col-lg-8">
			<form class="form-horizontal" action="save?back=/users/{{ user._id }}/edit" method="post" role="form" data-toggle="validator">
				<div class="form-group">
					<label for="firstname" class="col-sm-2 control-label">{{ _("First name") }}</label>
					<div class="col-sm-10">
						<input type="text" class="form-control" id="firstname" placeholder="First name" name="firstname" value="{{ user.firstname }}" required>
					</div>
				</div>
				<div class="form-group">
					<label for="lastname" class="col-sm-2 control-label">{{ _("Last name") }}</label>
					<div class="col-sm-10">
						<input type="text" class="form-control" id="lastname" placeholder="Last name" name="lastname" value="{{ user.lastname }}" required>
					</div>
				</div>

				<div class="form-group">
					<label for="lastname" class="col-sm-2 control-label">{{ _("Username") }}</label>
					<div class="col-sm-10">
						<input type="text" class="form-control" id="username" placeholder="Username" name="username" value="{{ user.username }}" required>
					</div>
				</div>

				<div class="form-group">
					<label for="email" class="col-sm-2 control-label">{{ _("Email") }}</label>
					<div class="col-sm-10">
						<input type="email" class="form-control" id="email" placeholder="Email" name="email" value="{{ user.email }}" required>
					</div>
				</div>

				<div class="form-group">
					<label for="password" class="col-sm-2 control-label">{{ _("Change password") }}</label>
					<div class="col-sm-10">
						<input type="text" class="form-control" id="old-password" placeholder="Old password" name="old-password" value="">
					</div>
				</div>
				
				<div class="form-group">
					<label for="password" class="col-sm-2 control-label"></label>
					<div class="col-sm-10">
						<input type="text" class="form-control" id="new-password" placeholder="New password" name="new-password" value="" min=8>
					</div>
				</div>

				<div class="form-group">
					<label for="password" class="col-sm-2 control-label"></label>
					<div class="col-sm-10">
						<input type="text" class="form-control" id="new-password-again" placeholder="New password (again)" name="new-password-again" value="" min=8 data-match="#new-password">
					</div>
				</div>

				<div class="form-group">
					<label for="" class="col-sm-2 control-label">{{ _("Password (hashed)") }}</label>
					<div class="col-sm-10">
						<input type="text" class="form-control" value="{{user.password}}" disabled>
					</div>
				</div>

				<div class="form-group">
					<label for="" class="col-sm-2 control-label">{{ _("Public key") }}</label>
					<div class="col-sm-10">
						<textarea type="text" class="form-control" disabled rows=5>{{ user.public_key }}</textarea>
					</div>
				</div>

				<a class="col-sm-12 control-label" data-toggle="collapse" data-target="#collapseDangerous" aria-expanded="false" aria-controls="collapseDangerous">
					{{ _("Click here to show dangerous settings") }}
				</a>

				<div class="collapse" id="collapseDangerous">

					<div class="form-group">
						<label for="" class="col-sm-2 control-label">{{ _("Private key (Encrypted, b64)") }}</label>
						<div class="col-sm-10">
							<textarea type="text" class="form-control" disabled rows=5>{{ user.private_key }}</textarea>
						</div>
					</div>

					<div class="form-group">
						<label class="col-sm-2 control-label">{{ _("Password") }}</label>
						<div class="col-sm-10">
							<p class="form-control-static">
								<input type="password" class="form-control" readonly=readonly value="****************" name="password-placeholder" />
							</p>
							<button class="btn btn-danger pull-right">{{ _("Reset password") }}</button>

						</div>
					</div>
					<hr/>
					<div class="form-group">
						<label for="removeUser" class="col-sm-2 control-label"></label>
						<div class="col-sm-10">
							<input type="checkbox" id="removeUserSure" onchange="javascript:$('#removeUser').attr('disabled',!$('#removeUserSure').prop('checked'))">
							<label for="removeUserSure">{{ _("I'm sure I want to remove this user.") }}</label>
							<button class="btn btn-danger pull-right" id="removeUser" disabled=true>{{ _("Remove user") }}</button>
						</div>
					</div>
				</div>

				<div class="form-group">
					<div class="col-sm-offset-2 col-sm-10">
						<button type="submit" class="btn btn-lg btn-success">{{ _("Save user") }}</button>
					</div>
				</div>

				<!-- CSRF token -->
				<input type="hidden" class="hidden" name="_csrf_token" value={{ csrf_token() }} />
			</form>
		</div>


		<div class="col-lg-4">
			<div class="panel panel-default">
				<div class="panel-body">
					{{ _("Users can be edited here. The password cannot be altered, but it can be reset if you are an administrator.") }}
				</div>

			</div>
		</div>

	</div>

</div>
{% endblock %}