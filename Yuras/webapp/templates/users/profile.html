{% extends "layout/master.html" %} {% block index %} {{ deferJS("/assets/js/yuras.js", 1) }} 
{{ deferJS("/assets/js/validator.min.js", 2) }}
{{ deferJS("chrome-extension://pfboblefjcgdjicmnffhdgionmgcdmne/u2f-api.js", 3) }}
{{ deferJS("/assets/js/u2f.js", 4) }}
<div class="container">

	<div class="row">

		<div class="col-lg-12">
			<h2>Profile page for {{ user.firstname }} </h2>	
		</div>

		<div class="col-lg-8">
			<form class="form-horizontal" action="/users/{{ user._id }}/save?back=/users/profile" method="post" role="form" data-toggle="validator">
				<div class="form-group">
					<label for="firstname" class="col-sm-2 control-label">First name</label>
					<div class="col-sm-10">
						<input type="text" class="form-control" id="firstname" placeholder="First name" name="firstname" value="{{ user.firstname }}" required>
					</div>
				</div>
				<div class="form-group">
					<label for="lastname" class="col-sm-2 control-label">Last name</label>
					<div class="col-sm-10">
						<input type="text" class="form-control" id="lastname" placeholder="Last name" name="lastname" value="{{ user.lastname }}" required>
					</div>
				</div>

				<div class="form-group">
					<label for="lastname" class="col-sm-2 control-label">Username</label>
					<div class="col-sm-10">
						<input type="text" class="form-control" id="username" placeholder="Username" name="username" value="{{ user.username }}" required>
					</div>
				</div>

				<div class="form-group">
					<label for="email" class="col-sm-2 control-label">Email</label>
					<div class="col-sm-10">
						<input type="email" class="form-control" id="email" placeholder="Email" name="email" value="{{ user.email }}" required>
					</div>
				</div>

				<div class="form-group">
					<label for="password" class="col-sm-2 control-label">Password</label>
					<div class="col-sm-10">
						<input type="text" class="form-control" id="password" placeholder="Password" name="password" value="">
					</div>
				</div>


				<div class="form-group">
					<div class="col-sm-offset-2 col-sm-10">
						<button type="submit" class="btn btn-lg btn-success">Save changes</button>
					</div>
				</div>

				<!-- CSRF token -->
				<input type="hidden" class="hidden" name="_csrf_token" value={{ csrf_token() }} />
			</form>
		
		</div>


		<div class="col-lg-4">
			<button class="btn btn-default btn-lg" id="enrollU2F" data-user-id="{{ user._id }}"> Click here to enroll your U2F device. </button>
		</div>
		
		
		<div class="col-lg-12">
			<h2> Documents by {{ user.firstname }}</h2>
			<table class="table table-striped">
				<thead>
					<tr>
						<th data-key="title">Title</th>
						<th data-key="_created">Created</th>
						<th>Actions</th>
					</tr>
				</thead>
				<tbody>
					{% for document in documents %}
					<tr>
						<td width="60%"><a href="/documents/{{ document._id }}" class="document-link">{{ document.title }}</a>
						</td>
						<td>{{ document._created.strftime("%d-%m-%Y %H:%M:%S") }}</td>
						<td>
							<a href="/documents/{{ document._id }}/delete" class="delete-document" data-csrf="{{ csrf_token() }}"><span class="glyphicon glyphicon-trash"></span></a>
							<a href="/documents/{{ document._id }}/download/docx" data-csrf="{{ csrf_token() }}"><span class="glyphicon glyphicon-download-alt"></span></a>
						</td>
					</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>

	</div>

</div>
{% endblock %}