{% extends "layout/master.html" %} 
{% block index %} 
{{ deferJS("/assets/js/yuras.js", 1) }} 
{{ deferJS("/assets/js/documents-popup.js", 1) }}
<div class="container">

	<div class="row">

		<div class="col-lg-12">
			<h2>Documents</h2>
			<a class="btn btn-default" href="/documents/upload"><span class="glyphicon glyphicon-folder-open"></span> Upload document</a>
			<a class="btn btn-default disabled"><span class="glyphicon glyphicon-cloud-download"></span> Download document from web</a>
		
		</div>
	</div>
	<div class="row">
		<div class="col-lg-12">
			<form action="/documents/search" method="get">
				<input type="hidden" class="category-input" name="category"/>
				<div class="input-group input-group-lg">
					<input type="text" class="form-control" placeholder="Search documents" name="keywords">
					<span class="input-group-btn">
						<!-- Category picker -->
						<button class="btn btn-default category-dropdown" data-toggle="dropdown" aria-expanded="false">
							<span class="category-dropdown-text"> Any category</span> <span class="caret"></span>
						</button>
						<ul class="dropdown-menu" role="menu">
							<li>
								<a href="#" class="category-option" data-value="">
									Any category
								</a>
							</li>
							<li class="divider"></li>
							{% for category in categories %}
							<li>
								<a href="#" data-value="{{ category.name }}" onclick="$('.category-dropdown-text').text($(this).data('value'));$('.category-input').val($(this).data('value')); ">
								{{ category.name }}
								</a>
							</li>
							{% endfor %}
						</ul>

						<!-- Search button -->
						<button class="btn btn-default" type="submit">
							<span class="glyphicon glyphicon-search"></span> Search 
						</button>

					</span>
				</div>
			</form>
		</div>
	</div>
	<div class="row">
		<div class="col-lg-12">

			<table class="table table-striped">
				<thead>
					<tr>
						<th data-key="title">Title</th>
						<th data-key="author">Author</th>
						<th data-key="secure">Secure</th>
						<th data-key="_created">Created</th>
						<th>Actions</th>
					</tr>
				</thead>
				<tbody>
					{% for document in documents %}
					<tr>
						<td width="50%"><a href="/documents/{{ document._id }}" class="document-link">{{ document.title }}</a>
						</td>
						<td>{{ document.author }}</td>
						<td>{{ document.secure }}</td>
						<td>{{ document._created.strftime("%d-%m-%Y") }}</td>
						<td>
							<a href="/documents/{{ document._id }}/delete" class="delete-document" data-csrf="{{ csrf_token() }}"><span class="glyphicon glyphicon-trash"></span></a>
							<a href="/documents/{{ document._id }}/download/docx" data-csrf="{{ csrf_token() }}"><span class="glyphicon glyphicon-download-alt"></span></a>
						</td>
					</tr>
					{% endfor %}
				</tbody>
			</table>

			<a class="btn btn-default prev-page" disabled=disabled><span class="glyphicon glyphicon-arrow-left"></span> Previous page </a>
			<a class="btn btn-default pull-right next-page"> Next page <span class="glyphicon glyphicon-arrow-right"></span></a>

		</div>

	</div>

</div>
{% endblock %}